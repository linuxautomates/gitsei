package io.levelops.api.services;

import org.junit.Assert;
import org.junit.Test;

import java.util.regex.Matcher;

import static io.levelops.api.services.SlackInteractivityEventService.PAYLOAD_EQUALS;
import static io.levelops.api.services.SlackInteractivityEventService.REQUESTOR_MESSAGE_PATTERN;

public class SlackInteractivityEventServiceTest {
    @Test
    public void test() {
        String event = "payload=%7B%22type%22%3A%22block_actions%22%2C%22user%22%3A%7B%22id%22%3A%22US4JC7ZM5%22%2C%22username%22%3A%22viraj%22%2C%22name%22%3A%22viraj%22%2C%22team_id%22%3A%22TM3U03S49%22%7D%2C%22api_app_id%22%3A%22AMUPV36SC%22%2C%22token%22%3A%22GggqaeLxzmK0KMkq8vI06sCK%22%2C%22container%22%3A%7B%22type%22%3A%22message%22%2C%22message_ts%22%3A%221601424946.000100%22%2C%22channel_id%22%3A%22C01B42LQFGD%22%2C%22is_ephemeral%22%3Afalse%2C%22thread_ts%22%3A%221601424946.000100%22%7D%2C%22trigger_id%22%3A%221399151944467.717952128145.e2836582204c77475e0d727f15912e95%22%2C%22team%22%3A%7B%22id%22%3A%22TM3U03S49%22%2C%22domain%22%3A%22levelopsworkspace%22%7D%2C%22channel%22%3A%7B%22id%22%3A%22C01B42LQFGD%22%2C%22name%22%3A%22slackbot-test-private-va%22%7D%2C%22message%22%3A%7B%22bot_id%22%3A%22B012WFFTLF7%22%2C%22type%22%3A%22message%22%2C%22text%22%3A%22This+content+can%27t+be+displayed.%22%2C%22user%22%3A%22U01342G4VJQ%22%2C%22ts%22%3A%221601424946.000100%22%2C%22team%22%3A%22TM3U03S49%22%2C%22blocks%22%3A%5B%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22vlOrp%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22%3Awarning%3A+A+Jenkins+Job+has+hit+some+triage+rules.%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22%3Dup%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Job%3A*+%60Test+Pipeline+1%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22d81VV%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Job+Run+Number%3A*+%601480%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22WJDPf%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Jenkins+Instance%3A*+%60Jenkins+Instance%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22v4WM%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Jenkins+URL%3A*+%60%3Chttps%3A%5C%2F%5C%2Fjenkins.dev.levelops.io%5C%2Fblue%5C%2Forganizations%5C%2Fjenkins%5C%2FPipelines%252FTest%2520Pipeline%25201%5C%2Fdetail%5C%2FTest%2520Pipeline%25201%5C%2F1480%5C%2Fpipeline%5C%2F20%7CView+Logs%3E%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22divider%22%2C%22block_id%22%3A%22t98%22%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22d32%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Stage%3A*+%60to+fail%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22divider%22%2C%22block_id%22%3A%22ZOkx%22%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22VE32p%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Rule%3A*+%60Failure%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22r4H%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Matches%3A*+%602%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22%2BEX%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Snippet%3A*+%60%60%60%2B+sleep+5%5Cn%2B+echo+Failure%5CnFailure%5Cn%2B+exit+1%5Cnscript+returned+exit+code+1%5Cn%60%60%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22divider%22%2C%22block_id%22%3A%22Sb9%22%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22WszzC%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Stage%3A*+%603%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22divider%22%2C%22block_id%22%3A%22BUQ%22%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22FfTFT%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Rule%3A*+%60Failure%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22OwmHi%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Matches%3A*+%60200%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22a6og%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Snippet%3A*+%60%60%60Failure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5Cn%60%60%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22divider%22%2C%22block_id%22%3A%22I3H7%22%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22nfzD%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Rule%3A*+%60Errors+or+exceptions%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22rGr%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Matches%3A*+%602%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22xCNc%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Snippet%3A*+%60%60%60%2B+sleep+5%5Cn%2B+echo+Error%5CnError%5Cn%2B+exit+1%5Cnscript+returned+exit+code+1%5Cn%60%60%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22lis%2B%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Job%3A*+%60Test+Pipeline+1%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22NlAu4%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Job+Run+Number%3A*+%601479%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22dU13q%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Jenkins+Instance%3A*+%60Jenkins+Instance%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22Mdy%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Jenkins+URL%3A*+%60%3Chttps%3A%5C%2F%5C%2Fjenkins.dev.levelops.io%5C%2Fblue%5C%2Forganizations%5C%2Fjenkins%5C%2FPipelines%252FTest%2520Pipeline%25201%5C%2Fdetail%5C%2FTest%2520Pipeline%25201%5C%2F1479%5C%2Fpipeline%5C%2F20%7CView+Logs%3E%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22divider%22%2C%22block_id%22%3A%22IFl%22%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22SIa%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Stage%3A*+%603%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22divider%22%2C%22block_id%22%3A%226%3Dxt4%22%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22DIhkb%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Rule%3A*+%60Errors+or+exceptions%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22hnMMc%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Matches%3A*+%602%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22Ts74Y%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Snippet%3A*+%60%60%60%2B+sleep+5%5Cn%2B+echo+Error%5CnError%5Cn%2B+exit+1%5Cnscript+returned+exit+code+1%5Cn%60%60%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22divider%22%2C%22block_id%22%3A%22aJLk%22%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22vA7Z%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Rule%3A*+%60Failure%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22H%5C%2FQtJ%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Matches%3A*+%60200%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22oAiwN%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Snippet%3A*+%60%60%60Failure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5Cn%60%60%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22divider%22%2C%22block_id%22%3A%22%3DyH%22%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22QBAm%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Stage%3A*+%60to+fail%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22divider%22%2C%22block_id%22%3A%22TB8F%22%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22Pvt%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Rule%3A*+%60Failure%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22X9Y%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Matches%3A*+%602%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22ftS%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Snippet%3A*+%60%60%60%2B+sleep+5%5Cn%2B+echo+Failure%5CnFailure%5Cn%2B+exit+1%5Cnscript+returned+exit+code+1%5Cn%60%60%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22M%5C%2F9hp%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22Change+ticket+status%22%2C%22verbatim%22%3Afalse%7D%2C%22accessory%22%3A%7B%22type%22%3A%22static_select%22%2C%22placeholder%22%3A%7B%22type%22%3A%22plain_text%22%2C%22text%22%3A%22Select+an+item%22%2C%22emoji%22%3Atrue%7D%2C%22options%22%3A%5B%7B%22text%22%3A%7B%22type%22%3A%22plain_text%22%2C%22text%22%3A%22Open%22%2C%22emoji%22%3Atrue%7D%2C%22value%22%3A%22OPEN%22%7D%2C%7B%22text%22%3A%7B%22type%22%3A%22plain_text%22%2C%22text%22%3A%22Closed%22%2C%22emoji%22%3Atrue%7D%2C%22value%22%3A%22CLOSED%22%7D%2C%7B%22text%22%3A%7B%22type%22%3A%22plain_text%22%2C%22text%22%3A%22In+Review%22%2C%22emoji%22%3Atrue%7D%2C%22value%22%3A%22IN_REVIEW%22%7D%5D%2C%22action_id%22%3A%220sY%22%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22cQjd%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22Forward+this+ticket%22%2C%22verbatim%22%3Afalse%7D%2C%22accessory%22%3A%7B%22type%22%3A%22multi_conversations_select%22%2C%22placeholder%22%3A%7B%22type%22%3A%22plain_text%22%2C%22text%22%3A%22Select+conversations%22%2C%22emoji%22%3Atrue%7D%2C%22action_id%22%3A%22u5a%22%7D%7D%5D%2C%22thread_ts%22%3A%221601424946.000100%22%2C%22reply_count%22%3A1%2C%22reply_users_count%22%3A1%2C%22latest_reply%22%3A%221601425074.000700%22%2C%22reply_users%22%3A%5B%22US4JC7ZM5%22%5D%2C%22subscribed%22%3Atrue%2C%22last_read%22%3A%221601425074.000700%22%7D%2C%22response_url%22%3A%22https%3A%5C%2F%5C%2Fhooks.slack.com%5C%2Factions%5C%2FTM3U03S49%5C%2F1411573786177%5C%2FmvOxQsdGuFpXQYwyuxs0fbvM%22%2C%22actions%22%3A%5B%7B%22type%22%3A%22static_select%22%2C%22action_id%22%3A%220sY%22%2C%22block_id%22%3A%22M%5C%2F9hp%22%2C%22selected_option%22%3A%7B%22text%22%3A%7B%22type%22%3A%22plain_text%22%2C%22text%22%3A%22In+Review%22%2C%22emoji%22%3Atrue%7D%2C%22value%22%3A%22IN_REVIEW%22%7D%2C%22placeholder%22%3A%7B%22type%22%3A%22plain_text%22%2C%22text%22%3A%22Select+an+item%22%2C%22emoji%22%3Atrue%7D%2C%22action_ts%22%3A%221601503354.602872%22%7D%5D%7D";
        String expected = "%7B%22type%22%3A%22block_actions%22%2C%22user%22%3A%7B%22id%22%3A%22US4JC7ZM5%22%2C%22username%22%3A%22viraj%22%2C%22name%22%3A%22viraj%22%2C%22team_id%22%3A%22TM3U03S49%22%7D%2C%22api_app_id%22%3A%22AMUPV36SC%22%2C%22token%22%3A%22GggqaeLxzmK0KMkq8vI06sCK%22%2C%22container%22%3A%7B%22type%22%3A%22message%22%2C%22message_ts%22%3A%221601424946.000100%22%2C%22channel_id%22%3A%22C01B42LQFGD%22%2C%22is_ephemeral%22%3Afalse%2C%22thread_ts%22%3A%221601424946.000100%22%7D%2C%22trigger_id%22%3A%221399151944467.717952128145.e2836582204c77475e0d727f15912e95%22%2C%22team%22%3A%7B%22id%22%3A%22TM3U03S49%22%2C%22domain%22%3A%22levelopsworkspace%22%7D%2C%22channel%22%3A%7B%22id%22%3A%22C01B42LQFGD%22%2C%22name%22%3A%22slackbot-test-private-va%22%7D%2C%22message%22%3A%7B%22bot_id%22%3A%22B012WFFTLF7%22%2C%22type%22%3A%22message%22%2C%22text%22%3A%22This+content+can%27t+be+displayed.%22%2C%22user%22%3A%22U01342G4VJQ%22%2C%22ts%22%3A%221601424946.000100%22%2C%22team%22%3A%22TM3U03S49%22%2C%22blocks%22%3A%5B%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22vlOrp%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22%3Awarning%3A+A+Jenkins+Job+has+hit+some+triage+rules.%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22%3Dup%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Job%3A*+%60Test+Pipeline+1%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22d81VV%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Job+Run+Number%3A*+%601480%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22WJDPf%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Jenkins+Instance%3A*+%60Jenkins+Instance%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22v4WM%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Jenkins+URL%3A*+%60%3Chttps%3A%5C%2F%5C%2Fjenkins.dev.levelops.io%5C%2Fblue%5C%2Forganizations%5C%2Fjenkins%5C%2FPipelines%252FTest%2520Pipeline%25201%5C%2Fdetail%5C%2FTest%2520Pipeline%25201%5C%2F1480%5C%2Fpipeline%5C%2F20%7CView+Logs%3E%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22divider%22%2C%22block_id%22%3A%22t98%22%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22d32%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Stage%3A*+%60to+fail%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22divider%22%2C%22block_id%22%3A%22ZOkx%22%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22VE32p%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Rule%3A*+%60Failure%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22r4H%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Matches%3A*+%602%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22%2BEX%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Snippet%3A*+%60%60%60%2B+sleep+5%5Cn%2B+echo+Failure%5CnFailure%5Cn%2B+exit+1%5Cnscript+returned+exit+code+1%5Cn%60%60%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22divider%22%2C%22block_id%22%3A%22Sb9%22%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22WszzC%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Stage%3A*+%603%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22divider%22%2C%22block_id%22%3A%22BUQ%22%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22FfTFT%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Rule%3A*+%60Failure%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22OwmHi%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Matches%3A*+%60200%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22a6og%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Snippet%3A*+%60%60%60Failure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5Cn%60%60%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22divider%22%2C%22block_id%22%3A%22I3H7%22%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22nfzD%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Rule%3A*+%60Errors+or+exceptions%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22rGr%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Matches%3A*+%602%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22xCNc%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Snippet%3A*+%60%60%60%2B+sleep+5%5Cn%2B+echo+Error%5CnError%5Cn%2B+exit+1%5Cnscript+returned+exit+code+1%5Cn%60%60%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22lis%2B%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Job%3A*+%60Test+Pipeline+1%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22NlAu4%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Job+Run+Number%3A*+%601479%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22dU13q%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Jenkins+Instance%3A*+%60Jenkins+Instance%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22Mdy%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Jenkins+URL%3A*+%60%3Chttps%3A%5C%2F%5C%2Fjenkins.dev.levelops.io%5C%2Fblue%5C%2Forganizations%5C%2Fjenkins%5C%2FPipelines%252FTest%2520Pipeline%25201%5C%2Fdetail%5C%2FTest%2520Pipeline%25201%5C%2F1479%5C%2Fpipeline%5C%2F20%7CView+Logs%3E%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22divider%22%2C%22block_id%22%3A%22IFl%22%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22SIa%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Stage%3A*+%603%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22divider%22%2C%22block_id%22%3A%226%3Dxt4%22%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22DIhkb%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Rule%3A*+%60Errors+or+exceptions%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22hnMMc%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Matches%3A*+%602%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22Ts74Y%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Snippet%3A*+%60%60%60%2B+sleep+5%5Cn%2B+echo+Error%5CnError%5Cn%2B+exit+1%5Cnscript+returned+exit+code+1%5Cn%60%60%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22divider%22%2C%22block_id%22%3A%22aJLk%22%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22vA7Z%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Rule%3A*+%60Failure%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22H%5C%2FQtJ%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Matches%3A*+%60200%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22oAiwN%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Snippet%3A*+%60%60%60Failure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5CnFailure%5Cn%60%60%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22divider%22%2C%22block_id%22%3A%22%3DyH%22%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22QBAm%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Stage%3A*+%60to+fail%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22divider%22%2C%22block_id%22%3A%22TB8F%22%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22Pvt%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Rule%3A*+%60Failure%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22X9Y%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Matches%3A*+%602%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22ftS%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22*Snippet%3A*+%60%60%60%2B+sleep+5%5Cn%2B+echo+Failure%5CnFailure%5Cn%2B+exit+1%5Cnscript+returned+exit+code+1%5Cn%60%60%60%22%2C%22verbatim%22%3Afalse%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22M%5C%2F9hp%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22Change+ticket+status%22%2C%22verbatim%22%3Afalse%7D%2C%22accessory%22%3A%7B%22type%22%3A%22static_select%22%2C%22placeholder%22%3A%7B%22type%22%3A%22plain_text%22%2C%22text%22%3A%22Select+an+item%22%2C%22emoji%22%3Atrue%7D%2C%22options%22%3A%5B%7B%22text%22%3A%7B%22type%22%3A%22plain_text%22%2C%22text%22%3A%22Open%22%2C%22emoji%22%3Atrue%7D%2C%22value%22%3A%22OPEN%22%7D%2C%7B%22text%22%3A%7B%22type%22%3A%22plain_text%22%2C%22text%22%3A%22Closed%22%2C%22emoji%22%3Atrue%7D%2C%22value%22%3A%22CLOSED%22%7D%2C%7B%22text%22%3A%7B%22type%22%3A%22plain_text%22%2C%22text%22%3A%22In+Review%22%2C%22emoji%22%3Atrue%7D%2C%22value%22%3A%22IN_REVIEW%22%7D%5D%2C%22action_id%22%3A%220sY%22%7D%7D%2C%7B%22type%22%3A%22section%22%2C%22block_id%22%3A%22cQjd%22%2C%22text%22%3A%7B%22type%22%3A%22mrkdwn%22%2C%22text%22%3A%22Forward+this+ticket%22%2C%22verbatim%22%3Afalse%7D%2C%22accessory%22%3A%7B%22type%22%3A%22multi_conversations_select%22%2C%22placeholder%22%3A%7B%22type%22%3A%22plain_text%22%2C%22text%22%3A%22Select+conversations%22%2C%22emoji%22%3Atrue%7D%2C%22action_id%22%3A%22u5a%22%7D%7D%5D%2C%22thread_ts%22%3A%221601424946.000100%22%2C%22reply_count%22%3A1%2C%22reply_users_count%22%3A1%2C%22latest_reply%22%3A%221601425074.000700%22%2C%22reply_users%22%3A%5B%22US4JC7ZM5%22%5D%2C%22subscribed%22%3Atrue%2C%22last_read%22%3A%221601425074.000700%22%7D%2C%22response_url%22%3A%22https%3A%5C%2F%5C%2Fhooks.slack.com%5C%2Factions%5C%2FTM3U03S49%5C%2F1411573786177%5C%2FmvOxQsdGuFpXQYwyuxs0fbvM%22%2C%22actions%22%3A%5B%7B%22type%22%3A%22static_select%22%2C%22action_id%22%3A%220sY%22%2C%22block_id%22%3A%22M%5C%2F9hp%22%2C%22selected_option%22%3A%7B%22text%22%3A%7B%22type%22%3A%22plain_text%22%2C%22text%22%3A%22In+Review%22%2C%22emoji%22%3Atrue%7D%2C%22value%22%3A%22IN_REVIEW%22%7D%2C%22placeholder%22%3A%7B%22type%22%3A%22plain_text%22%2C%22text%22%3A%22Select+an+item%22%2C%22emoji%22%3Atrue%7D%2C%22action_ts%22%3A%221601503354.602872%22%7D%5D%7D";
        Assert.assertTrue(event.startsWith(PAYLOAD_EQUALS));
        Assert.assertEquals(expected, event.substring(PAYLOAD_EQUALS.length()));
    }

    @Test
    public void testRequestorMessageParsing() {
        Matcher m = REQUESTOR_MESSAGE_PATTERN.matcher("From <mailto:viraj@levelops.io|viraj@levelops.io>,   Could you please take a look?");
        Assert.assertTrue(m.matches());
        Assert.assertEquals("Could you please take a look?", m.group("message"));
    }
}